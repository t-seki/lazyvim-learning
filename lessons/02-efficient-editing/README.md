# 02 - LazyVim 効率的編集操作

## 🎯 このレッスンについて

LazyVim環境での効率的な編集操作を習得し、LSP・Treesitter・自動補完を活用した現代的なコード編集スキルを身につけます。

### 学習の流れ（推奨順序）
1. **📖 [guide.md](guide.md)** - LazyVim編集機能の詳細解説
2. **🎯 [practice/](practice/)** - 実践的な編集練習
3. **🏋️ [exercises.md](exercises.md)** - 体系的なスキル検定
4. **💡 [tips.md](tips.md)** - 上級テクニックとトラブルシューティング

## 🎪 LazyVim編集機能とは？

**LazyVim = vim編集 + IDE機能の統合**

### 従来のvim vs LazyVim編集

| 従来のvim | LazyVim |
|-----------|---------|
| 手動でタグファイル生成 | **LSPによる自動的な定義・参照認識** |
| プラグインで補完設定 | **nvim-cmpによる高機能補完** |
| 手動でコメント記法 | **言語自動認識コメント** |
| 単純なテキストオブジェクト | **Treesitterによる構文認識選択** |

### LazyVim編集の主要機能

1. **LSP統合**: エラー検出、自動修正、リファクタリング支援
2. **Treesitter**: 構文解析によるスマートな選択・移動
3. **自動補完**: コンテキスト応答型の高機能補完
4. **言語サポート**: プログラミング言語別の最適化機能

## 🗝️ 重要な編集キーマップ

### LSPナビゲーション・編集

| キー | 機能 | 重要度 |
|------|------|-------|
| `gd` | Goto Definition | 高 |
| `gr` | References | 高 |
| `K` | Hover | 高 |
| `<leader>ca` | Code Action | 高 |

### 効率的な編集操作

#### テキストオブジェクト
| キー | 機能 | 説明 |
|------|------|------|
| `af` | 関数全体 | Treesitterによる関数認識 |
| `if` | 関数内部 | 関数の中身のみ |
| `ac` | クラス全体 | クラス全体を選択 |
| `ic` | クラス内部 | クラスの中身のみ |

#### 編集コマンド
| キー | 機能 | 説明 |
|------|------|------|
| `gcc` | 行コメント切り替え | 言語別コメント |
| `gc{motion}` | 範囲コメント | 選択範囲をコメント |
| `]d` | Next Diagnostic | 次のエラーへ移動 |
| `[d` | Prev Diagnostic | 前のエラーへ移動 |

#### 補完・スニペット
| キー | 機能 | 説明 |
|------|------|------|
| `<C-Space>` | 補完手動起動 | 補完メニューを表示 |
| `<Tab>` | 次のプレースホルダー | スニペット内移動 |
| `<S-Tab>` | 前のプレースホルダー | スニペット内逆移動 |

## 🎨 LazyVim編集環境の理解

### 編集支援システムの連携

```
┌─────────────────────────────────────┐
│            エディタ画面              │
├─────────────────────────────────────┤
│  LSP診断表示   │  Treesitter       │ ← 構文ハイライト
│  ────────────  │  構文認識         │
│  ⚠️ エラー表示  │  ┌─────────────┐   │
│  💡 修正提案   │  │ function() {│   │ ← スマート選択
│               │  │   ...       │   │
├─────────────────┴──┴─────────────────┤
│           補完メニュー               │ ← nvim-cmp
│  📝 変数名候補  🔧 関数候補  📚 文書  │
└─────────────────────────────────────┘
```

### 重要なUI要素

- **LSP診断**: エラー・警告をリアルタイム表示
- **補完メニュー**: コンテキストに応じた入力候補
- **Treesitterハイライト**: 構文に基づく正確なシンタックス
- **ホバー情報**: カーソル位置の詳細情報表示

## 🚀 学習アプローチ

### ⚡ 速習コース（30分）
1. **[guide.md](guide.md)** の基本編集操作 (15分)
2. **[practice/start/](practice/start/)** の基本練習 (15分)

### 📚 標準コース（75分）
1. **[guide.md](guide.md)** 全体熟読 (30分)
2. **[practice/](practice/)** 全ての練習ファイル (30分)
3. **[exercises.md](exercises.md)** スキル確認 (15分)

### 🏆 完全マスターコース（2時間）
- 上記標準コース + [tips.md](tips.md) + 実際のプロジェクトでの実践

## ⚡ 実践的な編集ワークフロー

### 開発時の典型的な編集フロー

1. **エラー確認**: `]d` で次のエラーに移動
2. **コード修正**: `<leader>ca` で自動修正実行
3. **定義確認**: `gd` で定義ジャンプ、`K` でドキュメント確認
4. **リファクタリング**: `gr` で参照確認後、一括変更
5. **コメント追加**: `gcc` で行コメント、`gc{motion}` で範囲コメント

### LazyVimが得意な編集作業

- **大規模リファクタリング**: LSPによる正確な参照・定義追跡
- **多言語開発**: 言語別の最適化された編集支援
- **エラー駆動開発**: リアルタイム診断による早期エラー発見
- **API探索**: ホバー情報とシグネチャヘルプによる効率的開発

## 📋 学習目標・前提知識

### 達成目標
- [ ] LSP機能（定義ジャンプ・参照検索・エラー修正）を活用できる
- [ ] Treesitterオブジェクト（af, if, ac, ic）を使いこなせる
- [ ] 効率的な編集コマンド（c, d, y, p）とLSP連携ができる
- [ ] 自動補完・スニペットを日常的に活用できる
- [ ] 言語別コメント機能を使いこなせる
- [ ] 診断機能を使ったエラー駆動開発ができる

### 前提知識
- [01-lazyvim-basics](../01-lazyvim-basics/) の完了
- which-key、Telescope、Neo-treeの基本操作
- vim基本編集操作（移動、モード切り替え、基本編集）

### 想定学習時間
約60-75分（練習時間含む）

## 🏃‍♂️ 次のステップ

### このレッスン完了後の選択肢

1. **次のレッスンへ**: [03-search-navigation](../03-search-navigation/) で検索機能を深掘り
2. **実プロジェクト適用**: 自分のコードでLazyVim編集機能を活用
3. **言語特化設定**: 使用言語に特化したLSP設定のカスタマイズ

### 学習継続のコツ

- **エラー駆動練習**: 意図的にエラーを作ってLSP機能を確認
- **リファクタリング練習**: 既存コードの改善でLSP連携を体験
- **多言語体験**: 異なる言語ファイルでLazyVim機能を確認

## ✅ 完了チェック

このレッスンを完了するには：

**必須項目**:
- [ ] guide.mdでLazyVim編集機能を理解した
- [ ] practice/で実際の編集操作を練習した
- [ ] LSP機能（gd, gr, K, <leader>ca）を使えるようになった
- [ ] Treesitterオブジェクト（af, if）を体験した

**推奨項目**:
- [ ] exercises.mdで体系的なスキル確認を完了した
- [ ] 実際のコードファイルでLSP機能を確認した
- [ ] tips.mdで上級テクニックを確認した

**完了したら**: `<leader>lc` でレッスン完了をマーク！

## 📚 参考リンク

- [nvim-lspconfig](https://github.com/neovim/nvim-lspconfig)
- [nvim-treesitter](https://github.com/nvim-treesitter/nvim-treesitter)
- [nvim-cmp](https://github.com/hrsh7th/nvim-cmp)

---

**重要**: このレッスンはLazyVimの編集機能の基礎です。実際のプロジェクトで繰り返し使用することで習熟度が向上します。