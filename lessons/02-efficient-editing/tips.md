# ヒントとテクニック

## よくある間違い

### 間違い1: テキストオブジェクトの i と a の混同

**症状**: 括弧や引用符を残したい/消したいのに逆の操作をしてしまう

**原因**: `i`（inner）と`a`（around）の違いを理解していない

**解決方法**:
```
"Hello World"
     ^カーソル

ci" → "" (中身だけ削除、引用符は残る)
ca" → カーソル位置（引用符も含めて削除）

覚え方：
i = inner = 内側だけ
a = around = 周りも含む
```

### 間違い2: オペレータ待機モードでの混乱

**症状**: `d`や`c`を押した後、何も起きずに固まる

**原因**: オペレータの後にモーションを入力していない

**解決方法**:
- `d`の後には必ずモーション（w, $, i"など）が必要
- 間違えたらESCでキャンセル
- `dd`、`cc`、`yy`は例外（行全体に作用）

### 間違い3: ビジュアルモード選択後の操作ミス

**症状**: 選択した後、通常の移動をしようとして選択が解除される

**原因**: ビジュアルモードのまま通常の編集コマンドを実行

**解決方法**:
```
v → 選択 → d/c/y → 操作完了（自動的にNormalモードへ）
選択をキャンセルしたい場合はESC
```

### 間違い4: ドットコマンドが期待通りに動かない

**症状**: `.`を押しても前回と違う動作をする

**原因**: 最後の変更が想定と異なる

**解決方法**:
- 挿入モードでの全ての入力が1つの変更として記録される
- `cw`新しい単語`<ESC>` が1つの繰り返し可能な単位
- 複雑な操作はマクロの使用を検討

## 効率的なテクニック

### テクニック1: オペレータ・モーションの最適な組み合わせ

目的に応じた最短コマンドの選択：

| 目的 | 非効率 | 効率的 | 理由 |
|------|--------|--------|------|
| 行末まで削除 | `v$d` | `D` or `d$` | 専用コマンドが存在 |
| 単語を変更 | `vwc` | `cw` or `ciw` | 直接的な操作 |
| 行全体をコピー | `Vy` | `yy` | 専用コマンド |
| カッコ内を削除 | `f(ldf)` | `di(` | テキストオブジェクト |

### テクニック2: f/t の効果的な使用

```
const result = calculate(value1, value2, value3);
                        ^カーソル

目標: value3を削除
- 非効率: llllllldw
- 効率的: f3dw または dt)
```

**f/t使い分けの指針**:
- `f` - その文字を含めて操作したい時
- `t` - その文字の手前まで操作したい時
- `;` - 同じ検索を繰り返し
- `,` - 逆方向に検索

### テクニック3: ビジュアルモードの高度な使い方

#### 矩形選択での一括編集
```
// 複数行の行頭に同じテキストを追加
1. Ctrl-v で矩形モード
2. j/k で複数行選択  
3. I でInsertモード
4. テキスト入力
5. ESC で全行に反映
```

#### インクリメンタルな選択
```
// 選択範囲を徐々に拡大
viw → 単語
vis → 文
vip → 段落
vi{ → ブロック内
va{ → ブロック含む
```

### テクニック4: 効率的な繰り返しパターン

#### パターン1: 検索と組み合わせ
```
/old<Enter>  → oldを検索
cw new<ESC>  → newに変更
n            → 次のoldへ
.            → 変更を繰り返し
```

#### パターン2: マクロ的な使用
```
0            → 行頭へ
f:           → :へジャンプ
a<Space>     → スペース追加
<ESC>        → Normalモードへ
j            → 次の行
.            → 同じ操作を繰り返し
```

### テクニック5: テキストオブジェクトの応用

#### ネストした構造での操作
```javascript
function outer() {
    function inner() {
        return {
            key: "value"
        };
    }
}

// カーソルが"value"にある時
ci" → "value"を変更
ci{ → { key: "value" }の中身を変更
cif → inner関数の中身を変更（プラグイン依存）
```

#### カスタムテキストオブジェクト（プラグイン拡張）
- `ai`（インデントレベル）
- `ae`（entire buffer）
- `al`（line）

## パフォーマンス向上のコツ

### 1. 思考の流れを妨げない編集

編集操作を無意識レベルまで習熟することで、コーディングの思考に集中できます：

- よく使うパターンを手に覚えさせる
- 複雑な操作より単純な操作の組み合わせ
- 一貫性のある操作方法の選択

### 2. コンテキストに応じた最適化

```javascript
// ケース1: 関数名の変更
function calculateTotal() {} // ciw が最適

// ケース2: 文字列の変更  
const msg = "Hello"; // ci" が最適

// ケース3: 配列要素の変更
const arr = [1, 2, 3]; // ci[ が最適
```

### 3. 予測可能な編集フロー

一連の編集を計画的に実行：

1. 変更箇所の特定（検索や移動）
2. 適切な範囲の選択（テキストオブジェクト）
3. 操作の実行（オペレータ）
4. 必要に応じて繰り返し（.コマンド）

## 関連する高度なコマンド

このレッスンの内容を発展させた操作：

- `gn` - 次の検索マッチをビジュアル選択
- `:s` - 置換（次のレッスンで詳細）
- `q` - マクロ記録（より複雑な繰り返し）
- `Ctrl-a/Ctrl-x` - 数値のインクリメント/デクリメント

## トラブルシューティング

### Q: テキストオブジェクトが効かない
A: カーソル位置を確認。対象の内側にカーソルがある必要があります。

### Q: ドットコマンドで余計な動作が含まれる
A: Insert modeでの全ての操作が記録されます。ESCまでが1単位。

### Q: ビジュアルモードで選択が思い通りにならない
A: `o`で選択の開始/終了位置を切り替えられます。

これらの編集テクニックをマスターすることで、思考速度でコードを編集できるようになります！