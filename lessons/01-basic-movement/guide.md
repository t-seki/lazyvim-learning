# 基本移動とモード 操作ガイド

## 概要

Neovimは「モード」という概念を中心に設計されたエディタです。異なるモードを切り替えることで、効率的にテキストを編集できます。このレッスンでは、基本的なモードの理解と、カーソル移動の方法を学びます。

## 基本概念

### Neovimの3つの基本モード

#### 1. Normal Mode（ノーマルモード）
- **役割**: コマンド実行とナビゲーション
- **特徴**: Neovimを起動した時の初期モード
- **表示**: 画面下部に何も表示されない（または`-- NORMAL --`）

#### 2. Insert Mode（挿入モード）
- **役割**: テキストの入力
- **特徴**: 通常のエディタと同じようにテキストを入力できる
- **表示**: 画面下部に`-- INSERT --`と表示

#### 3. Visual Mode（ビジュアルモード）
- **役割**: テキストの選択
- **特徴**: テキストを視覚的に選択してコピー、削除などの操作を行う
- **表示**: 画面下部に`-- VISUAL --`と表示

### モード遷移図

```
┌─────────────┐  i, a, o   ┌─────────────┐
│   Normal    │ ─────────> │   Insert    │
│    Mode     │ <───────── │    Mode     │
└─────────────┘     ESC    └─────────────┘
      │ ^
    v │ │ ESC
      v │
┌─────────────┐
│   Visual    │
│    Mode     │
└─────────────┘
```

## 操作方法

### モードの切り替え

#### Normal → Insert Mode

| コマンド | 説明 | 使用例 |
|---------|------|--------|
| `i` | カーソル位置の前から挿入開始 | カーソルがある位置から入力したい時 |
| `a` | カーソル位置の後から挿入開始 | カーソルの次の位置から入力したい時 |
| `I` | 行頭から挿入開始 | 行の最初から入力したい時 |
| `A` | 行末から挿入開始 | 行の最後に追加したい時 |
| `o` | 下に新しい行を作成して挿入開始 | 新しい行を追加したい時 |
| `O` | 上に新しい行を作成して挿入開始 | 現在行の上に新しい行を追加したい時 |

#### Insert/Visual → Normal Mode

| コマンド | 説明 |
|---------|------|
| `ESC` | Normal Modeに戻る |
| `Ctrl-[` | ESCキーの代替（より手の移動が少ない） |

#### Normal → Visual Mode

| コマンド | 説明 |
|---------|------|
| `v` | 文字単位のVisual Mode |
| `V` | 行単位のVisual Mode |
| `Ctrl-v` | 矩形選択のVisual Mode |

### 基本的なカーソル移動（Normal Mode）

#### hjkl移動

```
     k
     ↑
h ← --- → l
     ↓
     j
```

| キー | 移動方向 | 覚え方 |
|------|---------|--------|
| `h` | 左 | 一番左のキー |
| `j` | 下 | jは下に伸びている |
| `k` | 上 | kは上を指している |
| `l` | 右 | 一番右のキー |

#### 単語単位の移動

| コマンド | 説明 | 例 |
|---------|------|-----|
| `w` | 次の単語の先頭へ | `hello world` → helloの先頭からworldの先頭へ |
| `b` | 前の単語の先頭へ | `hello world` → worldの途中からhelloの先頭へ |
| `e` | 単語の末尾へ | `hello world` → helloの先頭からhelloの末尾へ |

#### 行内移動

| コマンド | 説明 |
|---------|------|
| `0` | 行頭へ移動 |
| `^` | 行の最初の非空白文字へ移動 |
| `$` | 行末へ移動 |

#### 画面内移動

| コマンド | 説明 |
|---------|------|
| `gg` | ファイルの先頭へ |
| `G` | ファイルの末尾へ |
| `Ctrl-u` | 半画面上へスクロール |
| `Ctrl-d` | 半画面下へスクロール |

### 基本的な編集操作（Normal Mode）

#### 削除

| コマンド | 説明 | 例 |
|---------|------|-----|
| `x` | カーソル位置の1文字削除 | `hello` → `hllo`（eを削除） |
| `dd` | 現在行を削除 | 行全体が削除される |
| `dw` | 単語を削除 | カーソル位置から単語末尾まで削除 |

#### 取り消し・やり直し

| コマンド | 説明 |
|---------|------|
| `u` | 直前の操作を取り消し（Undo） |
| `Ctrl-r` | 取り消しをやり直し（Redo） |

### ファイル操作

#### 保存と終了（Normal Mode）

| コマンド | 説明 |
|---------|------|
| `:w` | ファイルを保存 |
| `:q` | Neovimを終了（変更がある場合はエラー） |
| `:wq` | 保存して終了 |
| `:q!` | 変更を破棄して強制終了 |

## 練習の進め方

1. まず`nvim practice/start/movement.txt`でファイルを開く
2. Normal Modeでhjklを使った移動を練習
3. Insert Modeへの切り替えと、テキスト入力を練習
4. ESCでNormal Modeに戻る練習
5. 基本的な編集コマンドを試す

## まとめ

このレッスンで学んだ重要なポイント：

- **モードの概念**: Normal、Insert、Visualの3つの基本モード
- **基本移動**: hjklによるカーソル移動
- **モード切り替え**: `i`でInsert Mode、`ESC`でNormal Mode
- **基本編集**: `x`で削除、`u`で取り消し
- **ファイル操作**: `:w`で保存、`:q`で終了

これらの基本操作は、Neovimを使う上での土台となります。次のレッスンでは、より効率的な編集方法を学んでいきます。