# 01 - LazyVim 基本操作

## 🎯 学習目標

このレッスンでは、LazyVimディストリビューションの基本的な使い方を学びます。LazyVimは、設定済みのNeovim環境で、すぐに実用的な開発を始められるように設計されています。

### 達成目標
- [ ] LazyVimの基本的なキーマップを理解する
- [ ] which-keyを使ったコマンド発見を習得する
- [ ] LazyVimの設定構造を理解する
- [ ] 基本的なファイル操作ができる
- [ ] モード切り替えを自然に行える

## 📋 前提知識

- vimの基本的なモード（Normal、Insert、Visual）
- 基本的なカーソル移動（h, j, k, l）
- ESCキーでNormalモードに戻ること

## 🚀 LazyVim とは？

LazyVimは**完全に設定されたNeovimディストリビューション**です：

- **即座に使える**: インストール直後から高機能
- **プラグイン最適化**: 遅延読み込みで高速起動
- **現代的なUI**: 美しく実用的なインターフェース
- **拡張可能**: 必要に応じてカスタマイズ可能

### Lazy.nvim との違い

- **Lazy.nvim**: プラグインマネージャー（プラグインの管理だけ）
- **LazyVim**: 完全な開発環境（設定済みプラグイン + UI + キーマップ）

## 🗝️ LazyVim 基本キーマップ

### 1. which-keyを使ったコマンド発見

LazyVimの最も重要な機能は**which-key**です。

```
<Space> を押す → 利用可能なコマンド一覧が表示される
```

**練習**: Neovimを開いて`<Space>`を押してみましょう。

### 2. ファイル操作

| キー | 動作 | 説明 |
|------|------|------|
| `<leader>e` | ファイルツリー表示/非表示 | Neo-tree（ファイルエクスプローラー） |
| `<leader>ff` | ファイル検索 (Root Dir) | ルートディレクトリのファイル検索 |
| `<leader>fg` | Git ファイル検索 | Git管理下のファイル検索 |
| `<leader>fr` | 最近のファイル | Recent files |
| `<leader>fb` | バッファ一覧 | 開いているファイル一覧 |

**練習**: 各キーを試して、ファイル操作に慣れましょう。

### 3. 検索・移動

| キー | 動作 | 説明 |
|------|------|------|
| `<leader>/` | テキスト検索 | Grep (Root Dir) - プロジェクト全体テキスト検索 |
| `<leader>ss` | シンボル検索 | 関数・変数名検索 |
| `gd` | 定義ジャンプ | Go to definition |
| `gr` | 参照表示 | Show references |

### 4. ウィンドウ・タブ操作

| キー | 動作 | 説明 |
|------|------|------|
| `<leader>w` | ウィンドウ操作 | ウィンドウ関連コマンド |
| `<leader><tab>` | タブ操作 | タブ関連コマンド |
| `<C-h/j/k/l>` | ウィンドウ移動 | ウィンドウ間の移動 |

### 5. Git操作

| キー | 動作 | 説明 |
|------|------|------|
| `<leader>gg` | LazyGit起動 | Git GUI |
| `<leader>gf` | Git ファイル | Git管理下のファイル操作 |
| `<leader>gc` | Git コミット | コミット作成 |

## 📝 実践練習

### 練習1: which-keyマスター

1. Neovimを起動
2. `<Space>`を押す
3. 表示される各カテゴリを探索：
   - `f` → ファイル操作
   - `g` → Git操作
   - `w` → ウィンドウ操作
   - `x` → 診断（エラー・警告）

### 練習2: ファイル操作基本

1. `<leader>e`でファイルツリーを開く
2. Neo-tree内でファイルを選択（`Enter`で開く）
3. `<leader>ff`でファイル検索を試す
4. `<leader>fr`で最近のファイルを確認

### 練習3: 検索機能

1. このREADME.mdを開いた状態で：
   - `<leader>/`でプロジェクト全体から「練習」をテキスト検索
   - `<leader>fg`でGit管理下のファイルから「LazyVim」を検索

### 練習4: ヘルプシステム

1. `K`キーでカーソル下の単語のヘルプを表示
2. `:help lazyvim`でLazyVimのヘルプを開く
3. ヘルプ内で`<C-]>`でリンクをたどる
4. `<C-T>`で戻る

## 🎨 LazyVim の UI コンポーネント

### 1. ステータスライン（下部）
- 現在のモード、ファイル名、Git ブランチ
- LSP情報、カーソル位置

### 2. タブライン（上部）
- 開いているバッファ（ファイル）の一覧
- `<leader><tab>`で操作

### 3. サイドパネル
- Neo-tree: ファイルエクスプローラー
- Trouble: エラー・警告一覧

### 4. Telescope（検索UI）
- ファイル検索、テキスト検索
- フローティングウィンドウで表示

## ⚡ LazyVim の設定構造

LazyVimの設定ファイルは`~/.config/nvim/`に配置されます：

```
~/.config/nvim/
├── init.lua              # エントリーポイント
├── lua/
│   ├── config/
│   │   ├── autocmds.lua  # 自動コマンド
│   │   ├── keymaps.lua   # キーマップ
│   │   ├── lazy.lua      # Lazy.nvim設定
│   │   └── options.lua   # Neovimオプション
│   └── plugins/          # プラグイン設定
│       ├── *.lua         # 各プラグインの設定
└── lazyvim.json          # LazyVim設定ファイル
```

### カスタマイズのベストプラクティス

1. **既存設定を理解**: まず標準の動作を把握
2. **段階的カスタマイズ**: 少しずつ変更
3. **バックアップ**: 設定変更前にバックアップ
4. **ドキュメント確認**: 公式ドキュメントを参照

## 🏃‍♂️ 次のステップ

### エクササイズ: プロジェクト作成

1. 新しいディレクトリを作成：
```bash
mkdir ~/test-project
cd ~/test-project
```

2. LazyVimで開く：
```bash
nvim .
```

3. 以下の操作を練習：
   - ファイル作成（`a`で新規作成）
   - ファイル検索（`<leader>ff`）
   - Gitファイル検索（`<leader>fg`）
   - テキスト検索（`<leader>/`）
   - Git初期化（`<leader>gg`）

### チャレンジ: キーマップカスタマイズ

`~/.config/nvim/lua/config/keymaps.lua`に独自のキーマップを追加してみましょう：

```lua
-- カスタムキーマップの例
vim.keymap.set("n", "<leader>t", ":terminal<CR>", { desc = "Open terminal" })
```

## 📚 参考リンク

- [LazyVim公式ドキュメント](https://www.lazyvim.org/)
- [LazyVimキーマップ一覧](https://www.lazyvim.org/keymaps)
- [which-key.nvim使い方](https://github.com/folke/which-key.nvim)

## ✅ 完了チェック

このレッスンを完了するには：

- [ ] which-keyを使って任意のコマンドを5つ実行
- [ ] ファイルツリーでファイルを作成・削除
- [ ] Telescopeでファイル・テキスト検索を実行
- [ ] ヘルプシステムを使って何かを調べる
- [ ] Git操作（LazyGit）を試す

**完了したら**: `<leader>lc`でレッスン完了をマーク！

---

**💡 ヒント**: 困ったら`<leader>l?`で緊急ヘルプを表示できます。