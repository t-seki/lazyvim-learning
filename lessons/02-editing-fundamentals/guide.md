# 編集の基礎 操作ガイド

## 概要

Vimの編集コマンドは「オペレータ」と「モーション」の組み合わせで構成されています。
この組み合わせにより、効率的で直感的な編集が可能になります。

## 基本概念

### オペレータとモーション

Vimの編集コマンドは以下の構造を持ちます：
```
[count] operator [count] motion
```

- **count**: 繰り返し回数（オプション）
- **operator**: 実行する操作（d=削除, c=変更, y=コピー）
- **motion**: 操作の範囲（w=単語, $=行末まで）

例：
- `dw` = delete word（単語を削除）
- `c$` = change to end of line（行末まで変更）
- `3dd` = delete 3 lines（3行削除）

### テキストオブジェクト

テキストオブジェクトは、意味のある単位でテキストを扱います：

- `i` (inner): 内側のみ
- `a` (around): 周りも含む

## 操作方法

### 高度な移動コマンド

#### 行内ジャンプ

| コマンド | 説明 | 例 |
|---------|------|-----|
| `f{char}` | 右方向の文字へジャンプ | `fx` でxへジャンプ |
| `F{char}` | 左方向の文字へジャンプ | `F(` で左の(へジャンプ |
| `t{char}` | 右方向の文字の手前へ | `t)` で)の手前へ |
| `T{char}` | 左方向の文字の手前へ | `T"` で左の"の後へ |
| `;` | f/t検索を繰り返し | 同じ方向に繰り返し |
| `,` | f/t検索を逆方向へ | 逆方向に繰り返し |

#### ブロック移動

| コマンド | 説明 |
|---------|------|
| `{` | 前の段落へ |
| `}` | 次の段落へ |
| `%` | 対応する括弧へ |
| `[[` | 前の関数/セクションへ |
| `]]` | 次の関数/セクションへ |

### 主要な編集オペレータ

#### d (delete) - 削除

| コマンド | 説明 | 結果 |
|---------|------|------|
| `dw` | 単語を削除 | カーソル位置から単語末尾まで削除 |
| `dd` | 行を削除 | 行全体を削除 |
| `d$` | 行末まで削除 | カーソル位置から行末まで削除 |
| `daw` | 単語全体を削除 | 空白も含めて単語を削除 |
| `di"` | ""内を削除 | ダブルクォート内の文字列を削除 |

#### c (change) - 変更

| コマンド | 説明 | 結果 |
|---------|------|------|
| `cw` | 単語を変更 | 単語を削除してInsert Mode |
| `cc` | 行を変更 | 行を削除してInsert Mode |
| `c$` | 行末まで変更 | 行末まで削除してInsert Mode |
| `ciw` | 単語内を変更 | 単語全体を削除してInsert Mode |
| `ci(` | ()内を変更 | 括弧内を削除してInsert Mode |

#### y (yank) - コピー

| コマンド | 説明 | 結果 |
|---------|------|------|
| `yw` | 単語をコピー | カーソル位置から単語末尾までコピー |
| `yy` | 行をコピー | 行全体をコピー |
| `y$` | 行末までコピー | カーソル位置から行末までコピー |
| `yiw` | 単語全体をコピー | カーソル下の単語全体をコピー |
| `ya{` | {}ブロックをコピー | 中括弧とその中身をコピー |

### ペースト操作

| コマンド | 説明 |
|---------|------|
| `p` | カーソルの後にペースト |
| `P` | カーソルの前にペースト |

### テキストオブジェクトの詳細

#### 単語オブジェクト
- `iw` (inner word): 単語のみ
- `aw` (a word): 単語と周りの空白

```
カーソルが単語上にある時：
This is a |word| here
diw → This is a  here
daw → This is a here
```

#### 文字列オブジェクト
- `i"` / `i'`: クォート内の文字列
- `a"` / `a'`: クォートを含む文字列

```
print("Hello World")
       ^カーソル
di" → print("")
da" → print()
```

#### 括弧オブジェクト
- `i(` / `i)` / `ib`: 括弧内
- `a(` / `a)` / `ab`: 括弧を含む
- `i{` / `i}` / `iB`: 中括弧内
- `a{` / `a}` / `aB`: 中括弧を含む
- `i[` / `i]`: 角括弧内
- `a[` / `a]`: 角括弧を含む

```
function(arg1, arg2)
         ^カーソル
di( → function()
da( → function
```

#### タグオブジェクト（HTML/XML）
- `it`: タグ内のコンテンツ
- `at`: タグ全体

```
<div>content</div>
     ^カーソル
dit → <div></div>
dat → 
```

### ドットコマンド（.）による繰り返し

最後の変更操作を繰り返します：

```
1. cwfoo<ESC> で単語をfooに変更
2. 別の単語に移動
3. . で同じ変更を繰り返し
```

### ビジュアルモード

#### ビジュアルモードの種類

| コマンド | モード | 説明 |
|---------|--------|------|
| `v` | 文字単位 | 文字単位で選択 |
| `V` | 行単位 | 行単位で選択 |
| `Ctrl-v` | 矩形選択 | 矩形（ブロック）で選択 |

#### ビジュアルモードでの操作

1. `v`でビジュアルモードに入る
2. 移動コマンドで選択範囲を調整
3. オペレータ（d, c, y）を実行

例：
```
vwwwd  - 3単語を選択して削除
Vjjd   - 3行を選択して削除
Ctrl-v + $ + A + ; - 複数行の末尾に;を追加
```

### その他の便利な編集コマンド

| コマンド | 説明 |
|---------|------|
| `J` | 次の行を現在行に結合 |
| `gJ` | 次の行を結合（スペースを入れない） |
| `~` | 大文字小文字を切り替え |
| `gu{motion}` | 小文字に変換 |
| `gU{motion}` | 大文字に変換 |
| `>` | インデントを増やす |
| `<` | インデントを減らす |
| `=` | インデントを自動調整 |

## 実践的な使用例

### 例1: 関数の引数を変更
```javascript
// 変更前
function calculate(oldName, oldValue) {
    return oldName + oldValue;
}

// ci( で引数を一括変更
function calculate(newName, newValue) {
    return newName + newValue;
}
```

### 例2: 文字列の置き換え
```javascript
// 変更前
const message = "This is old text";

// ci" で文字列内容を変更
const message = "This is new text";
```

### 例3: ブロック内のコード削除
```javascript
// 変更前
if (condition) {
    console.log("Line 1");
    console.log("Line 2");
    console.log("Line 3");
}

// di{ でブロック内を削除
if (condition) {
}
```

## まとめ

このレッスンで学んだ重要なポイント：

- **オペレータ + モーション**: `d`, `c`, `y` と移動コマンドの組み合わせ
- **テキストオブジェクト**: `iw`, `aw`, `i"`, `i(` などの意味単位での編集
- **ドットコマンド**: `.` で最後の変更を繰り返し
- **ビジュアルモード**: 視覚的な選択と編集
- **効率的な編集**: f/t による素早い移動と編集の組み合わせ

これらのコマンドを組み合わせることで、思考の速度でコードを編集できるようになります。