# Text Object基本練習

このエクササイズでは、Text Objectの基本操作を段階的に練習します。各練習は実際の編集シナリオを想定しています。

## 準備

1. `practice-files/`ディレクトリのファイルを開いて練習します
2. 各操作の前に`:w`で保存、または`:e!`で元に戻すことができます
3. `u`（アンドゥ）と`Ctrl-r`（リドゥ）を活用してください

## レベル1: 基本Text Object

### 練習1.1: 単語の操作（sample.lua）

```lua
local function getName()  -- カーソルを"function"に置く
```

**タスク**:
- [ ] `diw`で"function"を削除
- [ ] `u`で戻して、`ciw`で"function"を"fn"に変更
- [ ] `daw`で単語と周囲の空白を削除する違いを確認

### 練習1.2: 引用符の操作（sample.py）

```python
message = "Hello, World!"  # カーソルを引用符内に置く
```

**タスク**:
- [ ] `vi"`で文字列内容を選択
- [ ] `ci"`で文字列を"Goodbye, World!"に変更
- [ ] `da"`で引用符ごと削除

### 練習1.3: 括弧の操作（sample.lua）

```lua
calculateArea(width, height)  -- カーソルを括弧内に置く
```

**タスク**:
- [ ] `di(`で引数を全て削除
- [ ] `ca(`で括弧ごと削除
- [ ] ネストした括弧`{["nested"]}`で`di[`、`di{`を試す

## レベル2: 段落と文の操作

### 練習2.1: 段落操作（sample.md）

Markdownファイルの段落で練習：

**タスク**:
- [ ] 任意の段落で`vip`を実行して選択範囲を確認
- [ ] `dap`で段落と空行を削除
- [ ] `cip`で段落内容だけを変更

### 練習2.2: 文の操作（sample.md）

複数の文がある段落で：

**タスク**:
- [ ] `vis`で一文を選択
- [ ] `das`で文と空白を削除
- [ ] `cis`で文の内容を変更

## レベル3: プログラミング構造

### 練習3.1: 関数操作（sample.py）

```python
def add_user(self, name: str, email: str) -> 'User':
    """新しいユーザーを追加"""
    # 関数の中身
```

**タスク**:
- [ ] 関数内で`vif`を実行（Treesitter必要）
- [ ] `dif`で関数の中身を削除
- [ ] `vaf`で関数全体を選択

### 練習3.2: クラス操作（sample.py）

UserManagerクラスで：

**タスク**:
- [ ] クラス内で`vic`を実行
- [ ] `dac`でクラス全体を削除（慎重に！）

## レベル4: 高度な編集

### 練習4.1: 複数要素の操作（sample.lua）

```lua
plugins = { "telescope", "treesitter", "lsp" }
```

**タスク**:
- [ ] "treesitter"にカーソルを置いて`di"`
- [ ] リスト全体を`di{`で削除
- [ ] 各要素を個別に`ci"`で変更

### 練習4.2: ネストした構造（sample.py）

configuration辞書で：

**タスク**:
- [ ] 深くネストした値で`ci"`を実行
- [ ] `vi{`を複数回実行して選択範囲の拡大を確認
- [ ] 特定のキー・値ペアを`dik`/`div`で操作（mini.ai使用時）

## レベル5: 実践的なリファクタリング

### 練習5.1: 変数名の変更（sample.lua）

**タスク**:
- [ ] 関数内の変数名を`ciw`で一つずつ変更
- [ ] `:s/\<old\>/new/g`と組み合わせて一括変更

### 練習5.2: 文字列の抽出（sample.py）

**タスク**:
- [ ] エラーメッセージ文字列を`yi"`でヤンク
- [ ] 定数として上部に定義
- [ ] 元の場所で`ci"`を使って定数名に置換

### 練習5.3: コードブロックの移動

**タスク**:
- [ ] 関数全体を`vaf`で選択してカット（`d`）
- [ ] 適切な場所に移動してペースト（`p`）
- [ ] インデントを`>`や`<`で調整

## チャレンジ課題

### 上級1: 効率的な編集

sample.pyの`process_numbers`関数で：
- [ ] リスト内包表記を通常のforループに展開
- [ ] Text Objectを使って最小限のキーストロークで実行

### 上級2: 構造の再編成

sample.luaのuserConfigテーブルで：
- [ ] ネストした構造をフラット化
- [ ] Text Objectを活用して効率的に実行

## 確認ポイント

練習後、以下を自問してください：

1. `i`と`a`の違いを説明できるか？
2. よく使うText Objectを5つ挙げられるか？
3. Text Objectとモーションの違いを理解しているか？
4. Treesitter Text Objectの利点を説明できるか？

## 次のステップ

- カスタムText Objectの作成方法を調査
- より複雑なリファクタリングシナリオでの練習
- 言語固有のText Object拡張を探索