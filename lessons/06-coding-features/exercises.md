# コーディング機能 - エクササイズ

## 準備
各練習用ファイルを開いて、実際にLSP機能を体験しながら学習を進めてください。

## エクササイズ1: LSPの基本操作

### TypeScriptでの練習（`practice/typescript/user-service.ts`）

1. **LSP起動確認**
   - [ ] ファイルを開いて`:LspInfo`でTypeScript LSPが起動していることを確認
   - [ ] エラーや警告が表示されていることを確認

2. **エラー修正**
   - [ ] 赤い下線のエラーにカーソルを合わせて`<leader>cd`で詳細確認
   - [ ] `]d`と`[d`でエラー間を移動
   - [ ] 各エラーで`<leader>ca`を押してコードアクションを確認

3. **未使用インポートの削除**
   - [ ] 4行目の`unusedFunction`にカーソルを置く
   - [ ] `<leader>ca`でコードアクションメニューを開く
   - [ ] "Remove unused imports"を選択

4. **型エラーの修正**
   - [ ] `validateEmail`関数の戻り値型を修正（`utils.ts`で`string`を`boolean`に）
   - [ ] `User`インターフェースに不足している`isActive`プロパティを追加

## エクササイズ2: リファクタリング機能

### リネーム操作

1. **メソッド名の変更**
   - [ ] `getUserById`メソッドにカーソルを置く
   - [ ] `<leader>cr`（または`gr`）でリネーム開始
   - [ ] `findUserById`に変更
   - [ ] 全ての参照箇所が更新されることを確認

2. **変数名の一括変更**
   - [ ] `config`変数を`serviceConfig`にリネーム
   - [ ] プロジェクト全体で変更が反映されることを確認

### コードアクション活用

1. **メソッド実装の生成**
   - [ ] 未実装の`updateUser`メソッドで`<leader>ca`
   - [ ] 実装スタブを生成

2. **async/await変換**
   - [ ] Promise処理部分で`<leader>ca`
   - [ ] async/awaitへの変換を実行

## エクササイズ3: 補完システム

### Pythonでの練習（`practice/python/test_snippets.py`）

1. **基本的な補完**
   - [ ] `class`と入力して`<Tab>`でクラススニペット展開
   - [ ] `def`と入力して`<Tab>`で関数スニペット展開
   - [ ] `main`と入力して`<Tab>`でメインブロック展開

2. **インポート補完**
   - [ ] `from typing import`の後で`<C-Space>`
   - [ ] `List`, `Dict`, `Optional`を選択

3. **メソッド補完**
   - [ ] `text.`の後で補完候補を確認
   - [ ] 文字列メソッド（`upper()`, `lower()`, `split()`など）を選択

4. **パス補完**
   - [ ] `"./`と入力してファイルパスの補完を確認

## エクササイズ4: フォーマッティング

### フォーマット実行（`practice/python/data_processor.py`）

1. **手動フォーマット**
   - [ ] `poorly_formatted_function`を確認
   - [ ] `<leader>cf`でフォーマット実行
   - [ ] インデントとスペースが整形されることを確認

2. **保存時自動フォーマット**
   - [ ] コードを意図的に崩す（スペースを削除など）
   - [ ] `:w`で保存して自動整形を確認

3. **インポート整理**
   - [ ] Pythonファイルで未使用インポートがある状態で保存
   - [ ] isortによる自動整理を確認

## エクササイズ5: 診断とトラブルシューティング

### エラー診断の活用

1. **診断一覧表示**
   - [ ] `<leader>xd`でTroubleによる診断一覧を開く
   - [ ] エラー、警告、情報の分類を確認
   - [ ] 一覧からジャンプして修正

2. **クイックフィックス**
   - [ ] インデントエラーの行で`<leader>ca`
   - [ ] 自動修正オプションがあれば適用

3. **型チェック**
   - [ ] 型アノテーションが不足している関数を確認
   - [ ] `<leader>ca`で型アノテーション追加

## エクササイズ6: マルチ言語プロジェクト

### 言語間連携（`practice/multi-language/`）

1. **APIエンドポイントの追跡**
   - [ ] `frontend/app.ts`で`/api/users`を検索
   - [ ] `gd`で定義元（Pythonファイル）へジャンプを試みる

2. **共通型定義の確認**
   - [ ] `User`インターフェース/クラスの定義を比較
   - [ ] 両言語で型が一致していることを確認

3. **プロジェクト全体検索**
   - [ ] `<leader>sg`で"User"を検索
   - [ ] TypeScriptとPython両方の結果を確認

4. **言語別LSP確認**
   - [ ] 各ファイルで`:LspInfo`を実行
   - [ ] 適切なLSPサーバーが起動していることを確認

## チャレンジ課題

### 上級1: カスタムスニペット作成
- [ ] よく使うコードパターンのスニペットを作成
- [ ] LuaSnipの設定ファイルに追加

### 上級2: LSP設定のカスタマイズ
- [ ] 特定の警告を無効化
- [ ] カスタムコードアクションを追加

### 上級3: 複雑なリファクタリング
- [ ] クラスからメソッドを抽出
- [ ] インターフェースの抽出
- [ ] 循環的複雑度の高い関数をリファクタリング

## 確認ポイント

学習後、以下を確認してください：

1. **LSP機能**
   - [ ] 主要なLSPコマンドを覚えているか
   - [ ] エラー診断を効率的に確認・修正できるか
   - [ ] コードアクションを活用できるか

2. **補完システム**
   - [ ] 補完の操作を理解しているか
   - [ ] スニペットを効果的に使えるか
   - [ ] 補完ソースの違いを理解しているか

3. **フォーマッティング**
   - [ ] 手動・自動フォーマットを使い分けられるか
   - [ ] 言語別の設定を理解しているか

4. **統合ワークフロー**
   - [ ] エラー修正の流れが身についているか
   - [ ] リファクタリング機能を自然に使えるか