# 03 - LazyVim 検索とナビゲーション

## 🎯 このレッスンについて

LazyVimの強力な検索・ナビゲーション機能を習得し、Telescope・LSP・従来のvim検索を組み合わせた効率的なコードベース探索スキルを身につけます。

### 学習の流れ（推奨順序）
1. **📖 [guide.md](guide.md)** - 検索・ナビゲーション機能の詳細解説
2. **🎯 [practice/](practice/)** - 実践的な検索練習
3. **🏋️ [exercises.md](exercises.md)** - 体系的なスキル検定
4. **💡 [tips.md](tips.md)** - 高度な検索テクニックとトラブルシューティング

## 🎪 LazyVim検索システムとは？

**LazyVim = 複数の検索システムの統合環境**

### 従来のvim vs LazyVim検索

| 従来のvim | LazyVim |
|-----------|---------|
| `:find`で手動ファイル検索 | **Telescopeによるファジー検索** |
| `:grep`コマンドでテキスト検索 | **ripgrepによる高速全文検索** |
| タグファイルで定義ジャンプ | **LSPによる正確な定義・参照検索** |
| 手動でシンボル管理 | **Aerialによる自動シンボル一覧** |

### LazyVim検索の階層構造

1. **🎯 Telescope**: プロジェクト全体の統合検索
2. **🧠 LSP**: 意味的な検索・ナビゲーション  
3. **⚡ vim検索**: 高速なバッファ内検索
4. **🔄 置換システム**: 安全で効率的な置換

## 🗝️ 重要な検索キーマップ

### ファイル・プロジェクト検索

| キー | 機能 | 重要度 |
|------|------|-------|
| `<leader>ff` | Find Files (Root Dir) | 高 |
| `<leader>fg` | Find Files (git-files) | 高 |
| `<leader>/` | Grep (Root Dir) | 高 |
| `<leader>fr` | Recent | 中 |

### シンボル・コード検索

#### LSP検索・ナビゲーション
| キー | 機能 | 説明 |
|------|------|------|
| `<leader>ss` | Goto Symbol (Aerial) | 関数・変数名検索 |
| `gd` | Goto Definition | 定義へジャンプ |
| `gr` | References | 参照箇所を表示 |
| `gi` | Goto Implementation | 実装へジャンプ |

#### 診断・エラー検索
| キー | 機能 | 説明 |
|------|------|------|
| `]d` | Next Diagnostic | 次のエラーへ移動 |
| `[d` | Prev Diagnostic | 前のエラーへ移動 |
| `<leader>xx` | Diagnostics (Trouble) | エラー一覧表示 |

### 置換・リファクタリング

| キー | 機能 | 説明 |
|------|------|------|
| `<leader>sr` | Replace | 安全な置換（spectre.nvim） |
| `*` | 単語検索 | カーソル下の単語をハイライト |
| `cgn` | 次を変更 | 検索結果の次の一致を変更 |

## 🎨 LazyVim検索環境の理解

### 検索システムの連携

```
┌─────────────────────────────────────┐
│         Telescopeハブ                │ ← 統合検索インターフェース
├─────────────┬───────────────────────┤
│  ファイル検索  │     テキスト検索       │
│  ──────────  │  ──────────────────  │
│  find_files  │  live_grep (ripgrep) │
│  git_files   │  grep_string         │
├─────────────┼───────────────────────┤
│   LSP検索    │     シンボル検索       │
│  ──────────  │  ──────────────────  │
│  定義・参照   │  Aerial (関数一覧)    │
│  実装ジャンプ  │  Treesitter構文      │
└─────────────┴───────────────────────┘
```

### 重要なUI要素

- **Telescope**: フローティングウィンドウでの統合検索
- **Aerial**: サイドバーでのシンボル一覧
- **Trouble**: エラー・警告の構造化表示
- **Live Grep**: リアルタイムテキスト検索とプレビュー

## 🚀 学習アプローチ

### ⚡ 速習コース（30分）
1. **[guide.md](guide.md)** の基本検索操作 (20分)
2. **[practice/start/](practice/start/)** のファイル検索練習 (10分)

### 📚 標準コース（80分）
1. **[guide.md](guide.md)** 全体熟読 (35分)
2. **[practice/](practice/)** 全ての検索練習 (30分)
3. **[exercises.md](exercises.md)** スキル確認 (15分)

### 🏆 完全マスターコース（2時間）
- 上記標準コース + [tips.md](tips.md) + 高度な置換・リファクタリング練習

## ⚡ 実践的な検索ワークフロー

### 開発時の典型的な検索フロー

1. **概要把握**: `<leader>ff` でプロジェクト構造確認
2. **関連ファイル**: `<leader>fg` でGit管理ファイルから検索
3. **機能検索**: `<leader>/` で特定の機能・APIを全文検索
4. **定義確認**: `gd` で定義ジャンプ、`gr` で使用箇所確認
5. **シンボル一覧**: `<leader>ss` で関数・クラス構造把握

### 問題解決での検索活用

- **バグ調査**: エラーメッセージを`<leader>/`で全文検索
- **API理解**: 関数名を`gr`で参照箇所確認
- **リファクタリング**: `<leader>sr`で安全な一括置換
- **コード理解**: `<leader>ss`でファイル構造把握

## 📋 学習目標・前提知識

### 達成目標
- [ ] Telescope検索（ファイル、テキスト、シンボル）を使いこなせる
- [ ] LSP統合検索（定義、参照、シンボル）を活用できる
- [ ] 従来のvim検索（/, ?, *, #）をLazyVimで最適化して使える
- [ ] 高度な置換（:%s、Telescope+置換）を安全に実行できる
- [ ] プロジェクト横断の検索・リファクタリングができる
- [ ] 複数ファイルの一括編集ワークフローを習得できる

### 前提知識
- [01-lazyvim-basics](../01-lazyvim-basics/) の完了
- [02-efficient-editing](../02-efficient-editing/) の完了
- Telescopeの基本操作に慣れている
- LazyVimのキーマップ（which-key）を理解している

### 想定学習時間
約60-80分（練習時間含む）

## 🏃‍♂️ 次のステップ

### このレッスン完了後の選択肢

1. **次のレッスンへ**: [04-project-management](../04-project-management/) でプロジェクト管理を学習
2. **実プロジェクト適用**: 大規模コードベースでの検索・ナビゲーション実践
3. **高度な検索設定**: 検索プラグインのカスタマイズと最適化

### 学習継続のコツ

- **大規模プロジェクト探索**: 他人のコードベースで検索機能を活用
- **リファクタリング練習**: 安全な置換機能で大規模な変更を体験
- **検索パターン習得**: 正規表現を活用した高度な検索技法

## ✅ 完了チェック

このレッスンを完了するには：

**必須項目**:
- [ ] guide.mdでLazyVim検索システムを理解した
- [ ] practice/で実際の検索操作を練習した
- [ ] Telescope検索（ff, fg, /）を使えるようになった
- [ ] LSP検索（gd, gr, ss）を活用できる

**推奨項目**:
- [ ] exercises.mdで体系的なスキル確認を完了した
- [ ] 複雑な検索・置換パターンを体験した
- [ ] tips.mdで高度な検索テクニックを確認した

**完了したら**: `<leader>lc` でレッスン完了をマーク！

## 📚 参考リンク

- [Telescope.nvim](https://github.com/nvim-telescope/telescope.nvim)
- [ripgrep](https://github.com/BurntSushi/ripgrep)
- [nvim-spectre](https://github.com/nvim-pack/nvim-spectre)
- [aerial.nvim](https://github.com/stevearc/aerial.nvim)

---

**重要**: このレッスンの検索・ナビゲーション技術は、大規模プロジェクトでの生産性向上に直結します。実際のプロジェクトで積極的に活用してください。